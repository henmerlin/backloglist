<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/recursos/template/template.xhtml">

	<ui:define name="tituloPagina">
		 Cadastrar Usuários
	</ui:define>
	<ui:define name="tituloPrincipal">
		<i class="fa fa-dashboard"> </i> Cadastrar Usuários</ui:define>
	<ui:define name="tituloSecundario"></ui:define>

	<ui:define name="botoesAcao"></ui:define>

	<ui:define name="eventos">
		<f:event listener="#{loginBean.validaAdmin()}" type="preRenderView" />
	</ui:define>

	<ui:define name="conteudo">

		<p:panel id="basic" header="Cadastro" style="margin-bottom:20px">

			<p:fieldset legend="Cadastro" toggleable="true" toggleSpeed="500">

				<h:panelGrid columns="3" cellpadding="10">
					
					<p:outputLabel for="n" value="Nome: " />
					<p:inputText id="n" value="#{usuarioBean.usuario.nome}" />
					<p:message for="n" />
					
					<p:outputLabel for="n0" value="Login: " />
					<p:inputText id="n0" value="#{usuarioBean.usuario.login}" />
					<p:message for="n0" />

					<p:outputLabel for="n1" value="Nivel:  " />
					<p:selectOneMenu id="n1" value="#{usuarioBean.usuario.nivel}">
						<f:selectItem itemLabel="-- Selecione --" itemDisabled="true" noSelectionOption="true"/>
						<f:selectItem itemLabel="Atendente" itemValue="1" />
						<f:selectItem itemLabel="Supervisor" itemValue="2" />
					</p:selectOneMenu>
					<p:message for="n1" />

					<p:outputLabel for="super" value="Supervisor" />
					<p:selectOneMenu id="super"
						value="#{usuarioBean.usuario.supervisor}"
						converter="omnifaces.SelectItemsConverter">
						<f:selectItem itemLabel="-- Selecione --" itemDisabled="true" noSelectionOption="true"/>
						<f:selectItems value="#{usuarioBean.listarSupervisor()}"
							var="super" itemLabel="#{super.nomeSupervisor}"
							itemValue="#{super}" />
					</p:selectOneMenu>
					<p:message for="super" />

					<p:commandButton action="#{usuarioBean.cadastrarOperador()}"
						value="Cadastrar!" update="@form" />

				</h:panelGrid>

			</p:fieldset>
		</p:panel>
		<p:panel header="Lista">
			<p:dataTable id="usuarios" var="user"
				value="#{usuarioBean.listarUsuarios()}"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
				paginator="true" rows="10" style="margin-bottom:20px"
				currentPageReportTemplate="[{startRecord} de {endRecord}]">
				
				<f:facet name="header">
	            	Lista de Usuário	            
				</f:facet>
				
				<p:column headerText="Nome">
					<h:outputText value="#{user.nome}" />
				</p:column>

				<p:column headerText="Matricula">
					<h:outputText value="#{user.login}" />
				</p:column>
				
				<p:column headerText="Supervisor">
					<h:outputText value="#{user.supervisor.nomeSupervisor}" />
				</p:column>
				
				<p:column headerText="Nivel">
					<h:outputText rendered="#{user.nivel==1}" value="Atendente" />
					<h:outputText rendered="#{user.nivel==2}" value="Supervisor" />
				</p:column>

			</p:dataTable>
		</p:panel>
	</ui:define>

</ui:composition>
</html>